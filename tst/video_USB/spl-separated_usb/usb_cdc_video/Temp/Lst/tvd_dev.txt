; generated by Component: ARM Compiler 5.06 update 7 (build 960) Tool: ArmCC [4d365d]
; commandline ArmCC [--c99 --list --debug -c --asm --interleave --gnu -o.\temp\obj\tvd_dev.o --asm_dir=.\Temp\Lst\ --list_dir=.\Temp\Lst\ --depend=.\temp\obj\tvd_dev.d --cpu=ARM9E --apcs=interwork -O0 -Otime --diag_suppress=9931 -I.\users\include -I.\..\machine\include -I.\..\periph\include -I.\..\include -I.\..\emwin\Include -I.\..\tinyusb\src -I.\..\tinyusb\hw -I.\..\display -I.\..\lib\display_gfx -I.\..\lib\printf -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_v5\ARM\INC\Atmel\SAM9260 -D__RTX -D__UVISION_VERSION=536 -DPCB_TINY200V1 -DCFG_TUSB_MCU=OPT_MCU_F1C100S -DCFG_TUSB_OS=OPT_OS_RTX4 --omf_browse=.\temp\obj\tvd_dev.crf ..\periph\tvd_dev.c]
                          ARM

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  tvd_irq_handle PROC
                  |L1.0|
;;;19     
;;;20     void tvd_irq_handle(int arg)
000000  e92d4010          PUSH     {r4,lr}
;;;21     {
000004  e1a04000          MOV      r4,r0
;;;22     	TVD_Printf("tvd irq\n");
000008  e28f00fc          ADR      r0,|L1.268|
00000c  ebfffffe          BL       __2printf
;;;23     
;;;24     //	TVD_Printf("%02x,%02x,%02x,%02x,%02x,%02x,%02x,%02x\n",
;;;25     //			tvd_y_buf[0],tvd_y_buf[1],tvd_y_buf[2],tvd_y_buf[3],
;;;26     //			tvd_y_buf[4],tvd_y_buf[5],tvd_y_buf[6],tvd_y_buf[7]);
;;;27     //	TVD_Printf("%02x,%02x,%02x,%02x,%02x,%02x,%02x,%02x\n",
;;;28     //				tvd_y_buf[1000],tvd_y_buf[1001],tvd_y_buf[1002],tvd_y_buf[1003],
;;;29     //				tvd_y_buf[1004],tvd_y_buf[1005],tvd_y_buf[1006],tvd_y_buf[1007]);
;;;30     	//tcountt ++;
;;;31     ////????	
;;;32     #if 1	
;;;33     	memcpy(tvd_y_buf_disp,tvd_y_buf,DEF_TWD_W*DEF_TWD_H);
000010  e59f2100          LDR      r2,|L1.280|
000014  e59f1100          LDR      r1,|L1.284|
000018  e59f0100          LDR      r0,|L1.288|
00001c  ebfffffe          BL       __aeabi_memcpy
;;;34     	memcpy(tvd_c_buf_disp,tvd_c_buf,DEF_TWD_W*DEF_TWD_H);
000020  e59f20f0          LDR      r2,|L1.280|
000024  e59f10f8          LDR      r1,|L1.292|
000028  e59f00f8          LDR      r0,|L1.296|
00002c  ebfffffe          BL       __aeabi_memcpy
;;;35     	tvd_irq_status_clear(tvd_id,TVD_FRAME_DONE);
000030  e3a01000          MOV      r1,#0
000034  e59f00f0          LDR      r0,|L1.300|
000038  e5900000          LDR      r0,[r0,#0]  ; tvd_id
00003c  ebfffffe          BL       tvd_irq_status_clear
;;;36     ////	f1c100s_intc_clear_pend();
;;;37     #endif
;;;38     	// dma_cache_sync(tvd_y_buf,720*576,3);
;;;39     	// dma_cache_sync(tvd_c_buf,720*576,3);
;;;40     /////	RefleshLcdWithTVD(tvd_y_buf_disp,tvd_c_buf_disp,DEF_TWD_W,DEF_TWD_H);
;;;41     }
000040  e8bd8010          POP      {r4,pc}
;;;42     
                          ENDP

                  tv_in_decode_init PROC
;;;43     
;;;44     void tv_in_decode_init(int id)
000044  e92d4070          PUSH     {r4-r6,lr}
;;;45     {
000048  e1a04000          MOV      r4,r0
;;;46     	int		   	retval  = 0;
00004c  e3a05000          MOV      r5,#0
;;;47     	tvd_id = id;
000050  e59f00d4          LDR      r0,|L1.300|
000054  e5804000          STR      r4,[r0,#0]  ; tvd_id
;;;48     	/////retval = request_irq(IRQ_TVD, tvd_irq_handle,0);//first requet irq
;;;49       f1c100s_intc_set_isr(IRQ_TVD, tvd_irq_handle);
000058  e24f1060          ADR      r1,|L1.0|
00005c  e3a0001b          MOV      r0,#0x1b
000060  ebfffffe          BL       f1c100s_intc_set_isr
;;;50       f1c100s_intc_enable_irq(IRQ_TVD);
000064  e3a0001b          MOV      r0,#0x1b
000068  ebfffffe          BL       f1c100s_intc_enable_irq
;;;51     	
;;;52     	printf("request_irq \n");
00006c  e28f00bc          ADR      r0,|L1.304|
000070  ebfffffe          BL       __2printf
;;;53     
;;;54     	tvd_bsp_init(0);//bsp init like open clk ,reset ...
000074  e3a00000          MOV      r0,#0
000078  ebfffffe          BL       tvd_bsp_init
;;;55     	TVD_Printf("tvd_bsp_init \n");
00007c  e28f00bc          ADR      r0,|L1.320|
000080  ebfffffe          BL       __2printf
;;;56     	tvd_config(TVD_SOURCE_CVBS,TVD_SOURCE_PAL,TVD_PL_YUV420);
000084  e3a02001          MOV      r2,#1
000088  e1a01002          MOV      r1,r2
00008c  e3a00000          MOV      r0,#0
000090  ebfffffe          BL       tvd_config
;;;57     	TVD_Printf("tvd_config \n");
000094  e28f00b4          ADR      r0,|L1.336|
000098  ebfffffe          BL       __2printf
;;;58     
;;;59     	tvd_set_fmt(id,TVD_PL_YUV420);
00009c  e3a01001          MOV      r1,#1
0000a0  e1a00004          MOV      r0,r4
0000a4  ebfffffe          BL       tvd_set_fmt
;;;60     	TVD_Printf("tvd_set_fmt \n");
0000a8  e28f00b0          ADR      r0,|L1.352|
0000ac  ebfffffe          BL       __2printf
;;;61     	tvd_set_addr_y(id,tvd_y_buf);
0000b0  e59f1064          LDR      r1,|L1.284|
0000b4  e1a00004          MOV      r0,r4
0000b8  ebfffffe          BL       tvd_set_addr_y
;;;62     	tvd_set_addr_c(id,tvd_c_buf);
0000bc  e59f1060          LDR      r1,|L1.292|
0000c0  e1a00004          MOV      r0,r4
0000c4  ebfffffe          BL       tvd_set_addr_c
;;;63     	tvd_set_blue_flag(0);
0000c8  e3a00000          MOV      r0,#0
0000cc  ebfffffe          BL       tvd_set_blue_flag
;;;64     	//Enable irq
;;;65     	tvd_irq_status_clear(id,TVD_FRAME_DONE);
0000d0  e3a01000          MOV      r1,#0
0000d4  e1a00004          MOV      r0,r4
0000d8  ebfffffe          BL       tvd_irq_status_clear
;;;66     	TVD_Printf("tvd_irq_status_clear \n");
0000dc  e28f008c          ADR      r0,|L1.368|
0000e0  ebfffffe          BL       __2printf
;;;67     
;;;68     	tvd_irq_enable(id,TVD_FRAME_DONE);
0000e4  e3a01000          MOV      r1,#0
0000e8  e1a00004          MOV      r0,r4
0000ec  ebfffffe          BL       tvd_irq_enable
;;;69     	TVD_Printf("tvd_irq_enable \n");
0000f0  e28f0090          ADR      r0,|L1.392|
0000f4  ebfffffe          BL       __2printf
;;;70     	
;;;71     	tvd_capture_on(id);
0000f8  e1a00004          MOV      r0,r4
0000fc  ebfffffe          BL       tvd_capture_on
;;;72     	TVD_Printf("tvd_capture_on \n");
000100  e28f0094          ADR      r0,|L1.412|
000104  ebfffffe          BL       __2printf
;;;73     
;;;74     
;;;75     
;;;76     }
000108  e8bd8070          POP      {r4-r6,pc}
;;;77     
                          ENDP

                  |L1.268|
00010c  74766420          DCB      "tvd irq\n",0
000110  6972710a
000114  00      
000115  00                DCB      0
000116  00                DCB      0
000117  00                DCB      0
                  |L1.280|
                          DCD      0x00065400
                  |L1.284|
                          DCD      tvd_y_buf
                  |L1.288|
                          DCD      tvd_y_buf_disp
                  |L1.292|
                          DCD      tvd_c_buf
                  |L1.296|
                          DCD      tvd_c_buf_disp
                  |L1.300|
                          DCD      tvd_id
                  |L1.304|
000130  72657175          DCB      "request_irq \n",0
000134  6573745f
000138  69727120
00013c  0a00    
00013e  00                DCB      0
00013f  00                DCB      0
                  |L1.320|
000140  7476645f          DCB      "tvd_bsp_init \n",0
000144  6273705f
000148  696e6974
00014c  200a00  
00014f  00                DCB      0
                  |L1.336|
000150  7476645f          DCB      "tvd_config \n",0
000154  636f6e66
000158  6967200a
00015c  00      
00015d  00                DCB      0
00015e  00                DCB      0
00015f  00                DCB      0
                  |L1.352|
000160  7476645f          DCB      "tvd_set_fmt \n",0
000164  7365745f
000168  666d7420
00016c  0a00    
00016e  00                DCB      0
00016f  00                DCB      0
                  |L1.368|
000170  7476645f          DCB      "tvd_irq_status_clear \n",0
000174  6972715f
000178  73746174
00017c  75735f63
000180  6c656172
000184  200a00  
000187  00                DCB      0
                  |L1.392|
000188  7476645f          DCB      "tvd_irq_enable \n",0
00018c  6972715f
000190  656e6162
000194  6c65200a
000198  00      
000199  00                DCB      0
00019a  00                DCB      0
00019b  00                DCB      0
                  |L1.412|
00019c  7476645f          DCB      "tvd_capture_on \n",0
0001a0  63617074
0001a4  7572655f
0001a8  6f6e200a
0001ac  00      
0001ad  00                DCB      0
0001ae  00                DCB      0
0001af  00                DCB      0

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  tvd_y_buf
                          %        414720
                  tvd_c_buf
                          %        414720
                  tvd_y_buf_disp
                          %        414720
                  tvd_c_buf_disp
                          %        414720

                          AREA ||.data||, DATA, ALIGN=2

                  tvd_id
                          DCD      0x00000000
                  tcountt
                          DCD      0x00000000
