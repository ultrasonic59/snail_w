; generated by Component: ARM Compiler 5.06 update 7 (build 960) Tool: ArmCC [4d365d]
; commandline ArmCC [--c99 --list --debug -c --asm --interleave --gnu -o.\temp\obj\tvd_dev.o --asm_dir=.\Temp\Lst\ --list_dir=.\Temp\Lst\ --depend=.\temp\obj\tvd_dev.d --cpu=ARM9E --apcs=interwork -O0 -Otime --diag_suppress=9931 -I.\users\include -I.\..\machine\include -I.\..\periph\include -I.\..\include -I.\..\emwin\Include -I.\..\tinyusb\src -I.\..\tinyusb\hw -I.\..\display -I.\..\lib\display_gfx -I.\..\lib\printf -IC:\Keil_v5\ARM\RV31\INC -IC:\Keil_v5\ARM\CMSIS\Include -IC:\Keil_v5\ARM\INC\Atmel\SAM9260 -D__RTX -D__UVISION_VERSION=536 -DPCB_TINY200V1 -DCFG_TUSB_MCU=OPT_MCU_F1C100S -DCFG_TUSB_OS=OPT_OS_RTX4 --omf_browse=.\temp\obj\tvd_dev.crf ..\periph\tvd_dev.c]
                          ARM

                          AREA ||.text||, CODE, READONLY, ALIGN=2

                  tvd_irq_handle PROC
                  |L1.0|
;;;16     int tcountt = 0;
;;;17     void tvd_irq_handle(int arg)
000000  e92d4010          PUSH     {r4,lr}
;;;18     {
000004  e1a04000          MOV      r4,r0
;;;19     //	TVD_Printf("tvd irq\n");
;;;20     
;;;21     //	TVD_Printf("%02x,%02x,%02x,%02x,%02x,%02x,%02x,%02x\n",
;;;22     //			tvd_y_buf[0],tvd_y_buf[1],tvd_y_buf[2],tvd_y_buf[3],
;;;23     //			tvd_y_buf[4],tvd_y_buf[5],tvd_y_buf[6],tvd_y_buf[7]);
;;;24     //	TVD_Printf("%02x,%02x,%02x,%02x,%02x,%02x,%02x,%02x\n",
;;;25     //				tvd_y_buf[1000],tvd_y_buf[1001],tvd_y_buf[1002],tvd_y_buf[1003],
;;;26     //				tvd_y_buf[1004],tvd_y_buf[1005],tvd_y_buf[1006],tvd_y_buf[1007]);
;;;27     	//tcountt ++;
;;;28     	memcpy(tvd_y_buf_disp,tvd_y_buf,720*576);
000008  e59f2108          LDR      r2,|L1.280|
00000c  e59f1108          LDR      r1,|L1.284|
000010  e59f0108          LDR      r0,|L1.288|
000014  ebfffffe          BL       __aeabi_memcpy
;;;29     	memcpy(tvd_c_buf_disp,tvd_c_buf,720*576);
000018  e59f20f8          LDR      r2,|L1.280|
00001c  e59f1100          LDR      r1,|L1.292|
000020  e59f0100          LDR      r0,|L1.296|
000024  ebfffffe          BL       __aeabi_memcpy
;;;30     	tvd_irq_status_clear(tvd_id,TVD_FRAME_DONE);
000028  e3a01000          MOV      r1,#0
00002c  e59f00f8          LDR      r0,|L1.300|
000030  e5900000          LDR      r0,[r0,#0]  ; tvd_id
000034  ebfffffe          BL       tvd_irq_status_clear
;;;31     
;;;32     	// dma_cache_sync(tvd_y_buf,720*576,3);
;;;33     	// dma_cache_sync(tvd_c_buf,720*576,3);
;;;34     	RefleshLcdWithTVD(tvd_y_buf_disp,tvd_c_buf_disp,720,576);
000038  e3a03d09          MOV      r3,#0x240
00003c  e3a02e2d          MOV      r2,#0x2d0
000040  e59f10e0          LDR      r1,|L1.296|
000044  e59f00d4          LDR      r0,|L1.288|
000048  ebfffffe          BL       RefleshLcdWithTVD
;;;35     	
;;;36     
;;;37     }
00004c  e8bd8010          POP      {r4,pc}
;;;38     
                          ENDP

                  tv_in_decode_init PROC
;;;39     
;;;40     void tv_in_decode_init(int id)
000050  e92d4070          PUSH     {r4-r6,lr}
;;;41     {
000054  e1a04000          MOV      r4,r0
;;;42     	int		   	retval  = 0;
000058  e3a05000          MOV      r5,#0
;;;43     	tvd_id = id;
00005c  e59f00c8          LDR      r0,|L1.300|
000060  e5804000          STR      r4,[r0,#0]  ; tvd_id
;;;44     	retval = request_irq(IRQ_TVD, tvd_irq_handle,0);//first requet irq
000064  e3a02000          MOV      r2,#0
000068  e24f1070          ADR      r1,|L1.0|
00006c  e3a0001b          MOV      r0,#0x1b
000070  ebfffffe          BL       request_irq
000074  e1a05000          MOV      r5,r0
;;;45     	printf("request_irq \n");
000078  e28f00b0          ADR      r0,|L1.304|
00007c  ebfffffe          BL       __2printf
;;;46     
;;;47     	tvd_bsp_init(0);//bsp init like open clk ,reset ...
000080  e3a00000          MOV      r0,#0
000084  ebfffffe          BL       tvd_bsp_init
;;;48     	TVD_Printf("tvd_bsp_init \n");
000088  e28f00b0          ADR      r0,|L1.320|
00008c  ebfffffe          BL       __2printf
;;;49     	tvd_config(TVD_SOURCE_CVBS,TVD_SOURCE_PAL,TVD_PL_YUV420);
000090  e3a02001          MOV      r2,#1
000094  e1a01002          MOV      r1,r2
000098  e3a00000          MOV      r0,#0
00009c  ebfffffe          BL       tvd_config
;;;50     	TVD_Printf("tvd_config \n");
0000a0  e28f00a8          ADR      r0,|L1.336|
0000a4  ebfffffe          BL       __2printf
;;;51     
;;;52     	tvd_set_fmt(id,TVD_PL_YUV420);
0000a8  e3a01001          MOV      r1,#1
0000ac  e1a00004          MOV      r0,r4
0000b0  ebfffffe          BL       tvd_set_fmt
;;;53     	TVD_Printf("tvd_set_fmt \n");
0000b4  e28f00a4          ADR      r0,|L1.352|
0000b8  ebfffffe          BL       __2printf
;;;54     	tvd_set_addr_y(id,tvd_y_buf);
0000bc  e59f1058          LDR      r1,|L1.284|
0000c0  e1a00004          MOV      r0,r4
0000c4  ebfffffe          BL       tvd_set_addr_y
;;;55     	tvd_set_addr_c(id,tvd_c_buf);
0000c8  e59f1054          LDR      r1,|L1.292|
0000cc  e1a00004          MOV      r0,r4
0000d0  ebfffffe          BL       tvd_set_addr_c
;;;56     	tvd_set_blue_flag(0);
0000d4  e3a00000          MOV      r0,#0
0000d8  ebfffffe          BL       tvd_set_blue_flag
;;;57     	//Enable irq
;;;58     	tvd_irq_status_clear(id,TVD_FRAME_DONE);
0000dc  e3a01000          MOV      r1,#0
0000e0  e1a00004          MOV      r0,r4
0000e4  ebfffffe          BL       tvd_irq_status_clear
;;;59     	TVD_Printf("tvd_irq_status_clear \n");
0000e8  e28f0080          ADR      r0,|L1.368|
0000ec  ebfffffe          BL       __2printf
;;;60     
;;;61     	tvd_irq_enable(id,TVD_FRAME_DONE);
0000f0  e3a01000          MOV      r1,#0
0000f4  e1a00004          MOV      r0,r4
0000f8  ebfffffe          BL       tvd_irq_enable
;;;62     	TVD_Printf("tvd_irq_enable \n");
0000fc  e28f0084          ADR      r0,|L1.392|
000100  ebfffffe          BL       __2printf
;;;63     	
;;;64     	tvd_capture_on(id);
000104  e1a00004          MOV      r0,r4
000108  ebfffffe          BL       tvd_capture_on
;;;65     	TVD_Printf("tvd_capture_on \n");
00010c  e28f0088          ADR      r0,|L1.412|
000110  ebfffffe          BL       __2printf
;;;66     
;;;67     
;;;68     
;;;69     }
000114  e8bd8070          POP      {r4-r6,pc}
;;;70     
                          ENDP

                  |L1.280|
                          DCD      0x00065400
                  |L1.284|
                          DCD      tvd_y_buf
                  |L1.288|
                          DCD      tvd_y_buf_disp
                  |L1.292|
                          DCD      tvd_c_buf
                  |L1.296|
                          DCD      tvd_c_buf_disp
                  |L1.300|
                          DCD      tvd_id
                  |L1.304|
000130  72657175          DCB      "request_irq \n",0
000134  6573745f
000138  69727120
00013c  0a00    
00013e  00                DCB      0
00013f  00                DCB      0
                  |L1.320|
000140  7476645f          DCB      "tvd_bsp_init \n",0
000144  6273705f
000148  696e6974
00014c  200a00  
00014f  00                DCB      0
                  |L1.336|
000150  7476645f          DCB      "tvd_config \n",0
000154  636f6e66
000158  6967200a
00015c  00      
00015d  00                DCB      0
00015e  00                DCB      0
00015f  00                DCB      0
                  |L1.352|
000160  7476645f          DCB      "tvd_set_fmt \n",0
000164  7365745f
000168  666d7420
00016c  0a00    
00016e  00                DCB      0
00016f  00                DCB      0
                  |L1.368|
000170  7476645f          DCB      "tvd_irq_status_clear \n",0
000174  6972715f
000178  73746174
00017c  75735f63
000180  6c656172
000184  200a00  
000187  00                DCB      0
                  |L1.392|
000188  7476645f          DCB      "tvd_irq_enable \n",0
00018c  6972715f
000190  656e6162
000194  6c65200a
000198  00      
000199  00                DCB      0
00019a  00                DCB      0
00019b  00                DCB      0
                  |L1.412|
00019c  7476645f          DCB      "tvd_capture_on \n",0
0001a0  63617074
0001a4  7572655f
0001a8  6f6e200a
0001ac  00      
0001ad  00                DCB      0
0001ae  00                DCB      0
0001af  00                DCB      0

                          AREA ||.bss||, DATA, NOINIT, ALIGN=0

                  tvd_y_buf
                          %        414720
                  tvd_c_buf
                          %        414720
                  tvd_y_buf_disp
                          %        414720
                  tvd_c_buf_disp
                          %        414720

                          AREA ||.data||, DATA, ALIGN=2

                  tvd_id
                          DCD      0x00000000
                  tcountt
                          DCD      0x00000000
